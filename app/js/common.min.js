$(function(){function e(){for(var e=0,t=0,o=0,a=0,i=0;i<v.length;i++)o+=v[i].offsetHeight,a+=v[i].offsetHeight,u[i]=a,x[i]=t,o>w&&(b[t]=i,e+=o-v[i].offsetHeight,m[t]=e,o=v[i].offsetHeight,t++)}function t(){$(".reviews__box").css("overflow","auto");var e=document.querySelector(".reviews__box").offsetWidth-document.querySelector(".reviews__box").clientWidth;$(".reviews__box__comment__text").css("margin-right",e),$(".reviews__box").css("overflow","hidden")}function o(){C&&-1!=h||(p=x[++h]),h==b[m.length-1]-1&&(h=-1,$(".reviews__box").animate({scrollTop:0},1750),T=!1),$(".reviews__box").animate({scrollTop:u[h]},500),C=!1}function a(){g?$(".reviews__box").finish():p<m.length-1&&!g?h=b[++p]:(p=-1,h=-1,$(".reviews__box").animate({scrollTop:0},1750)),C=!0,$(".reviews__box").animate({scrollTop:m[p]},1e3)}function i(){h--,C&&h--,h>=0?(p=x[h],$(".reviews__box").animate({scrollTop:u[h]},800)):-1==h?$(".reviews__box").animate({scrollTop:0},800):($(".reviews__box").animate({scrollTop:m[m.length-1]},1750),h=b[m.length-1]-2,T=!0),C=!1}function r(){--p>=0?(h=b[p],$(".reviews__box").animate({scrollTop:m[p]},1e3)):-1==p?($(".reviews__box").animate({scrollTop:0},1e3),h=-1,p=-1,T=!0):($(".reviews__box").animate({scrollTop:m[m.length-1]},1750),p=m.length-1,h=b[m.length-2]),C=!0}function n(){h=b[++p],$(".play").prop("disabled",!0).addClass("gray");var e=30*(u[h-1]-u[h-2]);e||(e=30*u[h-1]),$(".reviews__box").animate({scrollTop:m[p]},e,"linear"),setTimeout(function(){$(".play").prop("disabled",!1).removeClass("gray")},e)}function s(){m=[],u=[],b={},x={},p=-1,h=-1,y=!1,C=!1,w=document.querySelector(".reviews__box").offsetHeight-f,v=document.querySelectorAll(".reviews__box__comment"),e()}function _(e,t){e.length>=1&&t.length>=1&&($newComment=$(".reviews__box__comment:first").clone().prependTo(".reviews__box"),$(".reviews__box__comment__text__wrapper:first").removeClass("green").removeClass("red").removeClass("gray"),$newComment.children(".reviews__box__comment__name").html(e),$newComment.find(".reviews__box__comment__text").html(t),$(".reviews__box__comment__text__wrapper:first").addClass($(".reviews option:selected").val()),$(".reviews__new-review .name").val(""),$(".reviews__new-review__text").val(""),c()),e.length<1&&$(".reviews__new-review .name").css("border","2px solid #db594f"),t.length<1&&$(".reviews__new-review__text").css("border","2px solid #db594f")}function l(){t(),$(window).width()<=768&&$(window).width()>480?$(".header__logo,.header__contacts").unwrap(".header-left").addClass("unwrapped"):$(window).width()>768&&$(".header__logo,.header__contacts").hasClass("unwrapped")&&$(".header__logo,.header__contacts").wrapAll("<div class='header-left'></div>").removeClass("unwrapped"),$(window).width()<=480&&$(".footer__phone,.footer__mail").wrapAll("<div class='footer__item,footer__left'></div>")}function c(){$(".reviews__box").animate({scrollTop:0},1e3),clearTimeout(S),$(".play,.pause,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!0),S=setTimeout(function(){$(".play,.pause,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!1),s()},5e3)}$("body").css("opacity","1");var d=getComputedStyle(document.querySelector(".reviews__box")),f=parseInt(d.borderTopWidth),w=document.querySelector(".reviews__box").offsetHeight-f,v=document.querySelectorAll(".reviews__box__comment"),m=[],u=[],p=-1,h=-1,b={},x={},g=($(".reviews__box")[0].scrollHeight,$(".reviews__box").height(),!1),y=!1,C=!1,T=!1;$(".header__nav__item a:first").addClass("active"),$("form").submit(function(){var e=$(this);return $.ajax({type:"POST",url:"../mail.php",data:e.serialize()}).done(function(){alert("Thank you!"),setTimeout(function(){e.trigger("reset")},1e3)}),!1});var k=$(window).height();$(window).width()<=768&&$(".intro.fullscreen").css({"min-height":k+"px!important","max-height":k+"px!important",height:k+"px!important"}),$(window).scroll(function(){var e=$(window).scrollTop(),t=$("section#about").offset().top,o=$("section#galery").offset().top,a=$("section#price").offset().top,i=o-.3*(o-t),r=a-.3*(a-o),n=$("section#reviews").offset().top,s=n-.2*(n-a),_=$("section#contact").offset().top,l=_-.3*(_-n);e>=t&&e<.7*i?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:first").addClass("active")):e>=i&&e<r?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 1 )").addClass("active")):e>=r&&e<s?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 2 )").addClass("active")):e>=s&&e<l?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 3 )").addClass("active")):e>=l&&($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 4 )").addClass("active"))}),$(".header__nav,.btn-wrapper").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top,a=$("#about").offset().top;$("body,html").animate({scrollTop:o-a},1500)}),$("#my-menu").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top,a=$("#intro").offset().top;$("body,html").animate({scrollTop:o-a},1500)}),t(),setTimeout(function(){$(".play,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!1)},4999),setTimeout(e,5e3),$(".button.forward").on("click",function(){o()}),$(".button.fast-forward").on("click",function(){a()}),$(".button.backward").on("click",function(){i()}),$(".button.fast-backward").on("click",function(){r()}),$(".button.play").on("click",function(){n(),g&&$(this).html("<i class='fa fa-pause' aria-hidden='true'></i>")}),$("#my-menu").mmenu({onClick:{preventDefault:!0},navbar:{titleLink:"anchor"},extensions:["listview-large","fx-panels-slide-up","fx-listitems-drop","border-offset","pagedim-black"],offCanvas:{position:"right"}});var q=$("#my-menu").data("mmenu");$(".hamburger--emphatic").click(function(){q.open(),$(this).addClass("is-active")}),q.bind("close:start",function(e){$(".hamburger--emphatic").removeClass("is-active")}),$("#my-menu .button").click(function(){q.close()}),$(".add_review").on("click",function(){_($(".reviews__new-review .name").val(),$(".reviews__new-review__text").val())}),$(".reviews__new-review__text, .reviews__new-review .name ").focus(function(){$(this).css("border","none")}),$(window).on("orientationchange",function(){c()}),$(window).resize(function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||c()});var S;$(window).on("resize",function(){l()})});