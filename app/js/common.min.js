$(function(){function e(){for(var e=0,t=0,o=0,a=0,i=0;i<u.length;i++)o+=u[i].offsetHeight,a+=u[i].offsetHeight,p[i]=a,y[i]=t,o>m&&(g[t]=i,e+=o-u[i].offsetHeight,h[t]=e,o=u[i].offsetHeight,t++)}function t(){$(".reviews__box").css("overflow","auto");var e=document.querySelector(".reviews__box").offsetWidth-document.querySelector(".reviews__box").clientWidth;$(".reviews__box__comment__text").css("margin-right",e),$(".reviews__box").css("overflow","hidden")}function o(){k&&-1!=x||(b=y[++x]),x==g[h.length-1]-1&&(x=-1,$(".reviews__box").animate({scrollTop:0},1750),q=!1),$(".reviews__box").animate({scrollTop:p[x]},500),k=!1}function a(){C?$(".reviews__box").finish():b<h.length-1&&!C?x=g[++b]:(b=-1,x=-1,$(".reviews__box").animate({scrollTop:0},1750)),k=!0,$(".reviews__box").animate({scrollTop:h[b]},1e3)}function i(){x--,k&&x--,x>=0?(b=y[x],$(".reviews__box").animate({scrollTop:p[x]},800)):-1==x?$(".reviews__box").animate({scrollTop:0},800):($(".reviews__box").animate({scrollTop:h[h.length-1]},1750),x=g[h.length-1]-2,q=!0),k=!1}function r(){--b>=0?(x=g[b],$(".reviews__box").animate({scrollTop:h[b]},1e3)):-1==b?($(".reviews__box").animate({scrollTop:0},1e3),x=-1,b=-1,q=!0):($(".reviews__box").animate({scrollTop:h[h.length-1]},1750),b=h.length-1,x=g[h.length-2]),k=!0}function n(){x=g[++b],$(".play").prop("disabled",!0).addClass("gray");var e=30*(p[x-1]-p[x-2]);e||(e=30*p[x-1]),$(".reviews__box").animate({scrollTop:h[b]},e,"linear"),setTimeout(function(){$(".play").prop("disabled",!1).removeClass("gray")},e)}function s(){h=[],p=[],g={},y={},b=-1,x=-1,T=!1,k=!1;document.querySelector(".reviews__box").offsetHeight,document.querySelectorAll(".reviews__box__comment");e()}function _(e,t){e.length>=1&&t.length>=1&&($newComment=$(".reviews__box__comment:first").clone().prependTo(".reviews__box"),$(".reviews__box__comment__text__wrapper:first").removeClass("green").removeClass("red").removeClass("gray"),$newComment.children(".reviews__box__comment__name").html(e),$newComment.find(".reviews__box__comment__text").html(t),$(".reviews__box__comment__text__wrapper:first").addClass($(".reviews option:selected").val()),$(".reviews__new-review .name").val(""),$(".reviews__new-review__text").val(""),s(),l()),e.length<1&&$(".reviews__new-review .name").css("border","2px solid #db594f"),t.length<1&&$(".reviews__new-review__text").css("border","2px solid #db594f")}function c(){f(),t(),$(window).width()<=768&&$(window).width()>480?$(".header__logo,.header__contacts").unwrap(".header-left").addClass("unwrapped"):$(window).width()>768&&$(".header__logo,.header__contacts").hasClass("unwrapped")&&$(".header__logo,.header__contacts").wrapAll("<div class='header-left'></div>").removeClass("unwrapped"),$(window).width()<=480&&$(".footer__phone,.footer__mail").wrapAll("<div class='footer__item,footer__left'></div>")}function l(){$(".reviews__box").animate({scrollTop:0},1e3),clearTimeout(A),$(".play,.pause,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!0),A=setTimeout(d,5e3)}function d(){$(".play,.pause,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!1),s()}function f(){var e=$(".galery__item a img").height()+"px";$(".a-after").css("height",e)}$("body").css("opacity","1");var w=getComputedStyle(document.querySelector(".reviews__box")),v=parseInt(w.borderTopWidth),m=document.querySelector(".reviews__box").offsetHeight-v,u=document.querySelectorAll(".reviews__box__comment"),h=[],p=[],b=-1,x=-1,g={},y={},C=($(".reviews__box")[0].scrollHeight,$(".reviews__box").height(),!1),T=!1,k=!1,q=!1;$(".header__nav__item a:first").addClass("active"),$("form").submit(function(){var e=$(this);return $.ajax({type:"POST",url:"../mail.php",data:e.serialize()}).done(function(){alert("Thank you!"),setTimeout(function(){e.trigger("reset")},1e3)}),!1});var S=$(window).height();$(window).width()<=768&&$(".intro.fullscreen").css({"min-height":S+"px!important","max-height":S+"px!important",height:S+"px!important"}),$(window).scroll(function(){var e=$(window).scrollTop(),t=$("section#about").offset().top,o=$("section#galery").offset().top,a=$("section#price").offset().top,i=o-.3*(o-t),r=a-.3*(a-o),n=$("section#reviews").offset().top,s=n-.2*(n-a),_=$("section#contact").offset().top,c=_-.3*(_-n);e>=t&&e<.7*i?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:first").addClass("active")):e>=i&&e<r?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 1 )").addClass("active")):e>=r&&e<s?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 2 )").addClass("active")):e>=s&&e<c?($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 3 )").addClass("active")):e>=c&&($(".header__nav__item a").removeClass("active"),$(".header__nav__item a:eq( 4 )").addClass("active"))}),$(".header__nav,.btn-wrapper").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top,a=$("#about").offset().top;$("body,html").animate({scrollTop:o-a},1500)}),$("#my-menu").on("click","a",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(t).offset().top,a=$("#intro").offset().top;$("body,html").animate({scrollTop:o-a},1500)}),t(),setTimeout(function(){$(".play,.backward,.forward,.fast-forward,.fast-backward").prop("disabled",!1)},4999),setTimeout(e,5e3),$(".button.forward").on("click",function(){o()}),$(".button.fast-forward").on("click",function(){a()}),$(".button.backward").on("click",function(){i()}),$(".button.fast-backward").on("click",function(){r()}),$(".button.play").on("click",function(){n(),C&&$(this).html("<i class='fa fa-pause' aria-hidden='true'></i>")}),$("#my-menu").mmenu({onClick:{preventDefault:!0},navbar:{titleLink:"anchor"},extensions:["listview-large","fx-panels-slide-up","fx-listitems-drop","border-offset","pagedim-black"],offCanvas:{position:"right"}});var H=$("#my-menu").data("mmenu");$(".hamburger--emphatic").click(function(){H.open(),$(this).addClass("is-active")}),H.bind("close:start",function(e){$(".hamburger--emphatic").removeClass("is-active")}),$("#my-menu .button").click(function(){H.close()}),$(".add_review").on("click",function(){_($(".reviews__new-review .name").val(),$(".reviews__new-review__text").val())}),$(".reviews__new-review__text, .reviews__new-review .name ").focus(function(){$(this).css("border","none")});var A;$(window).on("orientationchange",function(){l()}),$(window).resize(function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||l()}),$(window).on("resize",function(){c()})});